@model BookDb.Views.Documents.IndexModel

@foreach (var item in Model.Documents)
{
    <tr data-document-id="@item.Id" class="document-card">
        <td><strong>@item.Title</strong></td>
        <td><span class="badge bg-info">@item.Category</span></td>
        <td>@item.Author</td>
        <td>@Model.GetFormattedDate(item.CreatedAt)</td>
        <td>
            <!-- View button - available for everyone -->
            <a asp-action="ViewDocument" asp-route-id="@item.Id"
               class="btn btn-sm btn-success">
                <i class="bi bi-eye"></i> Xem
            </a>

            @* Only show edit/delete when viewing "My Documents" list *@
            @if (Model.OnlyMine)
            {
                <span class="auth-only">
                    <a asp-action="Edit" asp-route-id="@item.Id"
                       class="btn btn-sm btn-warning">
                        <i class="bi bi-pencil"></i> Sửa
                    </a>
                    <button type="button" class="btn btn-sm btn-danger delete-btn"
                            data-id="@item.Id" data-title="@item.Title">
                        <i class="bi bi-trash"></i> Xóa
                    </button>
                </span>

                <!-- Disabled buttons for guests (only on My Documents view) -->
                <span class="guest-only" style="display:none;">
                    <div class="auth-required-overlay" style="display:inline-block;">
                        <button class="btn btn-sm btn-secondary disabled-for-guest">
                            <i class="bi bi-pencil"></i> Sửa
                        </button>
                    </div>
                    <div class="auth-required-overlay" style="display:inline-block;">
                        <button class="btn btn-sm btn-secondary disabled-for-guest">
                            <i class="bi bi-trash"></i> Xóa
                        </button>
                    </div>
                </span>
            }
        </td>
    </tr>
}

@if (!Model.HasDocuments())
{
    <tr>
        <td colspan="5" class="text-center text-muted py-4">
            <i class="bi bi-inbox" style="font-size: 32px;"></i>
            <p class="mt-2">Không có tài liệu nào</p>
        </td>
    </tr>
}